---
// src/layouts/Layout.astro
import NavRail from '../components/NavRail.astro';
import '../styles/global.css';

interface Props {
	title?: string;
}

const { title = "My Blog" } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<title>{title}</title>
        
        <script is:inline>
            const theme = (() => {
                if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
                    return localStorage.getItem('theme');
                }
                if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    return 'dark';
                }
                return 'light';
            })();
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
            }
        </script>
	</head>
	<body>
		<div class="app-layout">
			<NavRail />
			<main class="main-content">
				<slot />
			</main>
		</div>

        <script>
            import '@material/web/icon/icon.js';
            import '@material/web/button/elevated-button.js';
            import '@material/web/ripple/ripple.js';
        </script>
	</body>
</html>

<style>
    /* ... 保持不变 ... */
    .app-layout { display: contents; }
    .main-content {
        background-color: var(--md-sys-color-surface-container);
        border-top-left-radius: 28px;
        border-bottom-left-radius: 28px;
        height: 100vh;
        overflow-y: auto;
        padding: 2rem 3rem;
        grid-column: 2 / 3;
        /* 添加颜色过渡，切换时更丝滑 */
        transition: background-color 0.3s ease;
    }
</style>